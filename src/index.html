<!DOCTYPE html>
<html lang="id">
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />

		<title>Tugas Kelompok ke-1</title>

		<link
			href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css"
			rel="stylesheet"
			integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor"
			crossorigin="anonymous"
		/>
	</head>
	<body>
		<main class="container vstack gap-4 my-4">
			<form class="vstack gap-4">
				<div class="form-field">
					<label for="nama" class="form-label">Nama</label>
					<input required type="text" class="form-control" id="nama" name="nama" placeholder="Nama Anda" />
				</div>

				<div class="form-field">
					<label for="tanggal-lahir" class="form-label">Tanggal lahir</label>
					<input required type="date" class="form-control" id="tanggal-lahir" name="tanggal-lahir" placeholder="Tanggal lahir Anda" />
				</div>

				<div class="form-field">
					<span class="form-label d-block">Jenis Kelamin</span>

					<div class="form-check">
						<input required type="radio" class="form-check-input" name="jenis-kelamin" id="kelamin-pria" value="Laki-laki" />
						<label class="form-check-label" for="kelamin-pria">Laki-laki</label>
					</div>

					<div class="form-check">
						<input required type="radio" class="form-check-input" name="jenis-kelamin" id="kelamin-wanita" value="Perempuan" />
						<label class="form-check-label" for="kelamin-wanita">Perempuan</label>
					</div>
				</div>

				<div class="form-field">
					<label for="alamat" class="form-label">Alamat</label>
					<textarea required class="form-control" id="alamat" name="alamat" rows="3" placeholder="Alamat Anda"></textarea>
				</div>

				<div class="form-field">
					<label for="foto" class="form-label">Unggah Foto</label>
					<input required type="file" class="form-control" accept=".jpg, .jpeg, .png" id="foto" name="foto" />
				</div>

				<div class="form-field">
					<label for="cv" class="form-label">Unggah CV</label>
					<input required type="file" class="form-control" accept=".jpg, .jpeg, .png, .pdf, .doc" id="cv" name="cv" />
				</div>

				<div class="form-field">
					<label for="sertifikat" class="form-label">Unggah Sertifikat</label>
					<input required type="file" class="form-control" accept=".jpg, .jpeg, .png, .pdf, .doc" id="sertifikat" name="sertifikat" />
				</div>

				<div class="form-action hstack gap-2">
					<button class="btn btn-light" type="reset">Reset Form</button>
					<button class="btn btn-primary" type="submit">Kirim</button>
				</div>
			</form>

			<table class="table">
				<thead>
					<tr>
						<th scope="col">Nama</th>
						<th scope="col">Tanggal Lahir</th>
						<th scope="col">Jenis Kelamin</th>
						<th scope="col">Alamat</th>
						<th scope="col">Foto</th>
						<th scope="col">CV</th>
						<th scope="col">Sertifikat</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td class="text-center" colspan="7">Data Kosong</td>
					</tr>
				</tbody>
			</table>
		</main>

		<script>
			const $ = selector => document.querySelector(selector);

			function humaniseDate(date) {
				return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
			}

			function buildTableRow({ nama, tanggallahir, jeniskelamin, alamat, foto, cv, sertifikat }) {
				return `
					<tr>
						<th scope="row">${nama}</th>
						<td>${humaniseDate(new Date(tanggallahir))}</td>
						<td>${jeniskelamin}</td>
						<td>${alamat}</td>
						<td>${foto}</td>
						<td>${cv}</td>
						<td>${sertifikat}</td>
					</tr>
				`;
			}

			$('form').addEventListener('submit', event => {
				event.preventDefault();

				const formElement = event.currentTarget;
				const formData = new FormData(event.currentTarget);
				const tableBody = $('tbody');
				const isTableEmpty = tableBody.children[0].children[0].className.includes('center');

				let tableRow = {};

				for (const pair of formData.entries()) {
					const [originalKey, originalValue] = pair;

					const key = originalKey.replace('-', '');
					const value = originalValue instanceof File ? originalValue.name : originalValue;

					Object.assign(tableRow, {
						[key]: value,
					});
				}

				if (isTableEmpty) {
					tableBody.innerHTML = buildTableRow(tableRow);
				} else {
					tableBody.insertAdjacentHTML('beforeend', buildTableRow(tableRow));
				}

				formElement.reset();
			});
		</script>
	</body>
</html>
